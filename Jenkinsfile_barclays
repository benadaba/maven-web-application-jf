pipeline {
  agent any 
  tools{
    maven "maven386"
  }
 environment {
        NEXUS_URL = '172.22.0.4'
        NEXUS_REPOSITORY = 'nationwide-release'
        NEXUS_CREDENTIALS_ID = 'nexus-credentials'
    }
  stages{
       stage('1GetCode') {
            steps{
              git branch: 'local_laptop_pipeline', url: 'https://github.com/benadaba/maven-web-application-jf'
                }

        }
      
       stage('2build') {
            steps{
              sh "mvn package"
            }
        }
        /*
     stage('3CodeQualityAnalysis') {
            steps{
              sh "mvn sonar:sonar"
            }
        }
        */
        
     stage('deploy') {
            steps{
              sh "mvn deploy"
            }
        }
    }
    
    post{
        always{sh "echo always"}
        success{sh "echo success"}
        failure{sh "echo failure"}
    }
}

